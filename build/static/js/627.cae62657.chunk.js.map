{"version":3,"file":"static/js/627.cae62657.chunk.js","mappings":"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","sources":["../node_modules/lucide-react/src/icons/chevron-down.ts","components/CategoryDistributionChart.js"],"sourcesContent":["import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [['path', { d: 'm6 9 6 6 6-6', key: 'qrunsl' }]];\n\n/**\n * @component @name ChevronDown\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJtNiA5IDYgNiA2LTYiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/chevron-down\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst ChevronDown = createLucideIcon('chevron-down', __iconNode);\n\nexport default ChevronDown;\n","import React, { useState, useEffect, lazy, Suspense, forwardRef } from 'react';\r\nimport { ChevronDown, ChevronRight } from 'lucide-react';\r\nimport {\r\n  Chart as ChartJS,\r\n  ArcElement,\r\n  Tooltip,\r\n  Legend\r\n} from 'chart.js';\r\nimport { db } from \"../firebase\"; // Adjust path as needed\r\nimport { collection, query, getDocs, where } from \"firebase/firestore\";\r\nimport { useAuth } from \"../AuthContext\"; // Adjust path as needed\r\n\r\nconst DoughnutChart = lazy(() =>\r\n  import('react-chartjs-2').then(mod => ({ default: mod.Doughnut }))\r\n);\r\n\r\nChartJS.register(ArcElement, Tooltip, Legend);\r\n\r\n// Color palette for categories\r\nconst CATEGORY_COLORS = {\r\n  'Finance': { bg: '#0ea5e9', border: '#0284c7' },\r\n  'Healthcare': { bg: '#06b6d4', border: '#0891b2' },\r\n  'Economics': { bg: '#14b8a6', border: '#0d9488' },\r\n  'Technology': { bg: '#10b981', border: '#059669' },\r\n  'Retail': { bg: '#22c55e', border: '#16a34a' },\r\n  'Agriculture': { bg: '#84cc16', border: '#65a30d' },\r\n  'Energy': { bg: '#f59e0b', border: '#d97706' },\r\n  'Education': { bg: '#8b5cf6', border: '#7c3aed' },\r\n  'Manufacturing': { bg: '#ec4899', border: '#db2777' },\r\n  'Transportation': { bg: '#ef4444', border: '#dc2626' },\r\n  'Real Estate': { bg: '#06b6d4', border: '#0891b2' },\r\n  'Entertainment': { bg: '#f97316', border: '#ea580c' },\r\n  'Other': { bg: '#64748b', border: '#475569' }\r\n};\r\n\r\n// Default colors for unknown categories\r\nconst DEFAULT_COLORS = [\r\n  { bg: '#8b5cf6', border: '#7c3aed' },\r\n  { bg: '#ec4899', border: '#db2777' },\r\n  { bg: '#f59e0b', border: '#d97706' },\r\n  { bg: '#ef4444', border: '#dc2626' },\r\n  { bg: '#06b6d4', border: '#0891b2' },\r\n  { bg: '#f97316', border: '#ea580c' },\r\n  { bg: '#64748b', border: '#475569' }\r\n];\r\n\r\nconst CategoryDistributionChart = forwardRef((props, ref) => {\r\n  const [isOpen, setIsOpen] = useState(false);\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [chartData, setChartData] = useState(null);\r\n  const [error, setError] = useState(null);\r\n  const { user } = useAuth();\r\n\r\n  // Function to get color for a category\r\n  const getCategoryColor = (category, index) => {\r\n    if (CATEGORY_COLORS[category]) {\r\n      return CATEGORY_COLORS[category];\r\n    }\r\n    return DEFAULT_COLORS[index % DEFAULT_COLORS.length];\r\n  };\r\n\r\n  // Fetch category data from Firebase\r\n  const fetchCategoryData = async () => {\r\n    if (!user) {\r\n      setError(\"User not authenticated\");\r\n      return;\r\n    }\r\n\r\n    setIsLoading(true);\r\n    setError(null);\r\n\r\n    try {\r\n      console.log(\"üîç Fetching category data for user:\", user.uid);\r\n      \r\n      // Query user interactions collection\r\n      const userInteractionsRef = collection(db, \"users\", user.uid, \"userInteractions\");\r\n      const q = query(userInteractionsRef);\r\n      \r\n      const querySnapshot = await getDocs(q);\r\n      const interactions = [];\r\n      \r\n      querySnapshot.forEach((doc) => {\r\n        const data = doc.data();\r\n        interactions.push(data);\r\n      });\r\n\r\n      console.log(\"üìä Raw interactions data:\", interactions);\r\n\r\n      // Count categories\r\n      const categoryCounts = {};\r\n      \r\n      interactions.forEach((interaction) => {\r\n        // Check if the interaction has a category field\r\n        if (interaction.category && interaction.category.trim() !== \"\") {\r\n          const category = interaction.category.trim();\r\n          categoryCounts[category] = (categoryCounts[category] || 0) + 1;\r\n        }\r\n      });\r\n\r\n      console.log(\"üìà Category counts:\", categoryCounts);\r\n\r\n      // If no categories found, show a message\r\n      if (Object.keys(categoryCounts).length === 0) {\r\n        setChartData({\r\n          labels: ['No Categories Yet'],\r\n          datasets: [{\r\n            label: 'Scenario Count',\r\n            data: [1],\r\n            backgroundColor: ['#e2e8f0'],\r\n            borderColor: ['#cbd5e1'],\r\n            borderWidth: 2,\r\n          }]\r\n        });\r\n        setIsLoading(false);\r\n        return;\r\n      }\r\n\r\n      // Prepare chart data\r\n      const labels = Object.keys(categoryCounts);\r\n      const data = Object.values(categoryCounts);\r\n      const backgroundColors = [];\r\n      const borderColors = [];\r\n\r\n      labels.forEach((category, index) => {\r\n        const colors = getCategoryColor(category, index);\r\n        backgroundColors.push(colors.bg);\r\n        borderColors.push(colors.border);\r\n      });\r\n\r\n      const newChartData = {\r\n        labels: labels,\r\n        datasets: [{\r\n          label: 'Scenario Count',\r\n          data: data,\r\n          backgroundColor: backgroundColors,\r\n          borderColor: borderColors,\r\n          borderWidth: 2,\r\n          hoverBorderWidth: 3,\r\n          hoverBorderColor: '#ffffff',\r\n        }]\r\n      };\r\n\r\n      console.log(\"üé® Final chart data:\", newChartData);\r\n      setChartData(newChartData);\r\n\r\n    } catch (error) {\r\n      console.error(\"‚ùå Error fetching category data:\", error);\r\n      setError(\"Failed to load category data\");\r\n      \r\n      // Set fallback data\r\n      setChartData({\r\n        labels: ['Error Loading Data'],\r\n        datasets: [{\r\n          label: 'Scenario Count',\r\n          data: [1],\r\n          backgroundColor: ['#ef4444'],\r\n          borderColor: ['#dc2626'],\r\n          borderWidth: 2,\r\n        }]\r\n      });\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  // Handle component open/close\r\n  useEffect(() => {\r\n    if (isOpen && !chartData) {\r\n      fetchCategoryData();\r\n    }\r\n  }, [isOpen, user]);\r\n\r\n  // Chart options\r\n  const chartOptions = {\r\n    responsive: true,\r\n    maintainAspectRatio: false,\r\n    plugins: {\r\n      legend: {\r\n        position: 'right',\r\n        labels: {\r\n          color: '#64748b',\r\n          font: { size: 13, weight: '500' },\r\n          padding: 20,\r\n          usePointStyle: true,\r\n          pointStyle: 'circle',\r\n        },\r\n      },\r\n      tooltip: {\r\n        backgroundColor: \"rgba(8, 51, 68, 0.95)\",\r\n        titleColor: \"#f8fafc\",\r\n        bodyColor: \"#e2e8f0\",\r\n        borderColor: \"#0ea5e9\",\r\n        borderWidth: 1,\r\n        cornerRadius: 12,\r\n        displayColors: true,\r\n        padding: 14,\r\n        titleFont: { size: 13, weight: 'bold' },\r\n        bodyFont: { size: 12 },\r\n        callbacks: {\r\n          label: function (context) {\r\n            const label = context.label || '';\r\n            const value = context.parsed || 0;\r\n            const total = context.dataset.data.reduce((a, b) => a + b, 0);\r\n            const percentage = ((value / total) * 100).toFixed(1);\r\n            return `${label}: ${value} scenarios (${percentage}%)`;\r\n          },\r\n        },\r\n      },\r\n    },\r\n  };\r\n\r\n  return (\r\n    <div\r\n      ref={ref}\r\n      className=\"w-full mt-8 bg-gradient-to-br from-slate-50 via-white to-cyan-50/30 dark:from-slate-900 dark:via-slate-800 dark:to-teal-900/20 hover:shadow-cyan-500/25 transition-all duration-500 ease-out px-8 py-8 border border-slate-200/60 dark:border-slate-700/60 rounded-2xl shadow-2xl hover:shadow-cyan-500/30 backdrop-blur-sm\"\r\n    >\r\n      <div\r\n        onClick={() => setIsOpen(prev => !prev)}\r\n        className=\"flex items-center justify-between cursor-pointer mb-6 group\"\r\n      >\r\n        <div className=\"flex items-center space-x-3\">\r\n          <div className=\"flex items-center justify-center w-10 h-10 bg-gradient-to-br from-cyan-500 to-teal-600 rounded-xl shadow-lg\">\r\n            <span className=\"text-white text-lg font-bold\">üìä</span>\r\n          </div>\r\n          <div>\r\n            <h2 className=\"text-2xl font-bold bg-gradient-to-r from-cyan-600 via-teal-600 to-emerald-600 dark:from-cyan-400 dark:via-teal-400 dark:to-emerald-400 bg-clip-text text-transparent group-hover:from-cyan-700 group-hover:via-teal-700 group-hover:to-emerald-700 dark:group-hover:from-cyan-300 dark:group-hover:via-teal-300 dark:group-hover:to-emerald-300 transition-all duration-300\">\r\n              Scenario Category Distribution\r\n            </h2>\r\n            <p className=\"text-sm text-slate-500 dark:text-slate-400 mt-1\">\r\n              {chartData && chartData.datasets[0] ? \r\n                `${chartData.datasets[0].data.reduce((a, b) => a + b, 0)} total scenarios across ${chartData.labels.length} categories` :\r\n                'Click to view your scenario categories'\r\n              }\r\n            </p>\r\n          </div>\r\n        </div>\r\n        <div className=\"flex items-center justify-center w-10 h-10 bg-gradient-to-br from-cyan-100 to-teal-100 dark:from-cyan-800/50 dark:to-teal-800/50 rounded-xl group-hover:from-cyan-200 group-hover:to-teal-200 dark:group-hover:from-cyan-700/60 dark:group-hover:to-teal-700/60 transition-all duration-300\">\r\n          {isOpen ? (\r\n            <ChevronDown className=\"text-cyan-600 dark:text-cyan-400 group-hover:text-cyan-700 dark:group-hover:text-cyan-300 transition-colors duration-200\" size={20} />\r\n          ) : (\r\n            <ChevronRight className=\"text-cyan-600 dark:text-cyan-400 group-hover:text-cyan-700 dark:group-hover:text-cyan-300 transition-colors duration-200\" size={20} />\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n      <div className={`transition-all duration-500 ease-in-out overflow-hidden ${isOpen ? 'max-h-[600px] opacity-100' : 'max-h-0 opacity-0'}`}>\r\n        <div className=\"h-96 flex items-center justify-center transition-all duration-300 bg-gradient-to-br from-white via-slate-50/50 to-cyan-50/30 dark:from-slate-800 dark:via-slate-800/80 dark:to-teal-900/20 rounded-2xl border border-slate-200/80 dark:border-slate-700/60 shadow-inner p-6\">\r\n          {isLoading ? (\r\n            <div className=\"w-full h-full relative overflow-hidden rounded-2xl\">\r\n              <div className=\"absolute inset-0 bg-gradient-to-r from-slate-200 via-cyan-100 to-slate-200 dark:from-slate-700 dark:via-cyan-800/30 dark:to-slate-700 animate-pulse\" />\r\n              <div className=\"absolute inset-0 bg-gradient-to-r from-transparent via-white/30 to-transparent dark:via-cyan-400/10 animate-shimmer\"\r\n                   style={{\r\n                     backgroundImage: 'linear-gradient(90deg, transparent, rgba(14, 165, 233, 0.2), transparent)',\r\n                     backgroundSize: '200% 100%',\r\n                     animation: 'shimmer 2s ease-in-out infinite'\r\n                   }} />\r\n              <div className=\"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-40 h-40 bg-gradient-to-br from-cyan-300 to-teal-300 dark:from-cyan-600 dark:to-teal-600 rounded-full animate-pulse shadow-2xl\" />\r\n              <div className=\"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-20 h-20 bg-gradient-to-br from-white to-slate-100 dark:from-slate-800 dark:to-slate-700 rounded-full animate-pulse\" />\r\n              <div className=\"absolute top-6 right-6 space-y-2\">\r\n                <div className=\"w-24 h-3 bg-gradient-to-r from-cyan-300 to-teal-300 dark:from-cyan-600 dark:to-teal-600 rounded animate-pulse\" />\r\n                <div className=\"w-20 h-3 bg-gradient-to-r from-teal-300 to-emerald-300 dark:from-teal-600 dark:to-emerald-600 rounded animate-pulse\" />\r\n                <div className=\"w-28 h-3 bg-gradient-to-r from-emerald-300 to-cyan-300 dark:from-emerald-600 dark:to-cyan-600 rounded animate-pulse\" />\r\n              </div>\r\n              <div className=\"absolute bottom-6 left-6 right-6\">\r\n                <div className=\"text-center text-slate-600 dark:text-slate-400 text-sm\">\r\n                  Loading your scenario categories...\r\n                </div>\r\n              </div>\r\n            </div>\r\n          ) : error ? (\r\n            <div className=\"text-center\">\r\n              <div className=\"text-red-500 dark:text-red-400 text-lg mb-2\">‚ö†Ô∏è</div>\r\n              <p className=\"text-red-600 dark:text-red-400 text-sm\">{error}</p>\r\n              <button \r\n                onClick={() => {\r\n                  setError(null);\r\n                  fetchCategoryData();\r\n                }}\r\n                className=\"mt-4 px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors text-sm\"\r\n              >\r\n                Retry\r\n              </button>\r\n            </div>\r\n          ) : chartData ? (\r\n            <Suspense fallback={\r\n              <div className=\"w-full h-full relative overflow-hidden rounded-2xl\">\r\n                <div className=\"absolute inset-0 bg-gradient-to-r from-slate-200 via-cyan-100 to-slate-200 dark:from-slate-700 dark:via-cyan-800/30 dark:to-slate-700 animate-pulse\" />\r\n              </div>\r\n            }>\r\n              <DoughnutChart data={chartData} options={chartOptions} />\r\n            </Suspense>\r\n          ) : (\r\n            <div className=\"text-center text-slate-500 dark:text-slate-400\">\r\n              <div className=\"text-4xl mb-4\">üìä</div>\r\n              <p>No data available</p>\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        {/* Category Summary */}\r\n        {chartData && chartData.labels.length > 0 && chartData.labels[0] !== 'No Categories Yet' && chartData.labels[0] !== 'Error Loading Data' && (\r\n          <div className=\"mt-6 grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4\">\r\n            {chartData.labels.map((category, index) => {\r\n              const count = chartData.datasets[0].data[index];\r\n              const color = chartData.datasets[0].backgroundColor[index];\r\n              return (\r\n                <div key={category} className=\"bg-white dark:bg-slate-800 rounded-lg p-4 border border-slate-200 dark:border-slate-700 shadow-sm\">\r\n                  <div className=\"flex items-center gap-3\">\r\n                    <div \r\n                      className=\"w-4 h-4 rounded-full\"\r\n                      style={{ backgroundColor: color }}\r\n                    />\r\n                    <div>\r\n                      <p className=\"font-medium text-slate-800 dark:text-slate-200 text-sm\">{category}</p>\r\n                      <p className=\"text-slate-500 dark:text-slate-400 text-xs\">{count} scenarios</p>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              );\r\n            })}\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      <style>{`\r\n        @keyframes shimmer {\r\n          0% { transform: translateX(-100%); }\r\n          100% { transform: translateX(100%); }\r\n        }\r\n        .animate-shimmer {\r\n          animation: shimmer 2s ease-in-out infinite;\r\n        }\r\n      `}</style>\r\n    </div>\r\n  );\r\n});\r\n\r\nexport default CategoryDistributionChart;"],"names":["ChevronDown","createLucideIcon","d","key","DoughnutChart","lazy","then","mod","default","Doughnut","ChartJS","register","ArcElement","Tooltip","Legend","CATEGORY_COLORS","bg","border","DEFAULT_COLORS","forwardRef","props","ref","isOpen","setIsOpen","useState","isLoading","setIsLoading","chartData","setChartData","error","setError","user","useAuth","fetchCategoryData","async","console","log","uid","userInteractionsRef","collection","db","q","query","querySnapshot","getDocs","interactions","forEach","doc","data","push","categoryCounts","interaction","category","trim","Object","keys","length","labels","datasets","label","backgroundColor","borderColor","borderWidth","values","backgroundColors","borderColors","index","colors","getCategoryColor","newChartData","hoverBorderWidth","hoverBorderColor","useEffect","_jsxs","className","children","onClick","prev","_jsx","concat","reduce","a","b","size","ChevronRight","style","backgroundImage","backgroundSize","animation","Suspense","fallback","options","responsive","maintainAspectRatio","plugins","legend","position","color","font","weight","padding","usePointStyle","pointStyle","tooltip","titleColor","bodyColor","cornerRadius","displayColors","titleFont","bodyFont","callbacks","context","value","parsed","percentage","dataset","toFixed","map","count"],"sourceRoot":""}