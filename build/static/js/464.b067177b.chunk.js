/*! For license information please see 464.b067177b.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkomnis=self.webpackChunkomnis||[]).push([[464],{2382:(e,t,a)=>{a.d(t,{A:()=>r});const r=(0,a(7784).A)("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]])},3033:(e,t,a)=>{a.d(t,{A:()=>r});const r=(0,a(7784).A)("chart-pie",[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]])},9464:(e,t,a)=>{a.r(t),a.d(t,{default:()=>p});var r=a(9379),s=a(5043),o=a(7033),n=a(4919),i=a(3033),l=a(2382),d=a(8326),c=a(5399),u=a(5472),m=a(9613),x=a(7304),b=a(579);x.t1.register(x.PP,x.kc,x.E8,x.FN,x.No,x.Bs,x.m_,x.s$);const h=(0,s.lazy)((()=>a.e(58).then(a.bind(a,6058)).then((e=>({default:e.Bar}))))),g=(0,s.lazy)((()=>a.e(58).then(a.bind(a,6058)).then((e=>({default:e.Line}))))),f=(0,s.lazy)((()=>a.e(58).then(a.bind(a,6058)).then((e=>({default:e.Doughnut}))))),p=(0,s.forwardRef)(((e,t)=>{const{user:a}=(0,m.As)(),[x,p]=(0,s.useState)("bar"),[v,y]=(0,s.useState)(50),[j,k]=(0,s.useState)(!1),[C,N]=(0,s.useState)(!1),[A,D]=(0,s.useState)([]),[B,S]=(0,s.useState)([]),[w,F]=(0,s.useState)(0),[E,z]=(0,s.useState)("individual");(0,s.useEffect)((()=>{if(!a)return;(async()=>{const e=await(0,u.GG)((0,u.P)((0,u.rJ)(c.db,"userInteractions"),(0,u._M)("userId","==",a.uid),(0,u._M)("action","==","simulate_scenario")));F(e.docs.length)})()}),[a]),(0,s.useEffect)((()=>{if(j){N(!0);const e=setTimeout((()=>{N(!1)}),1500);return()=>clearTimeout(e)}}),[j]),(0,s.useEffect)((()=>{if(!a)return;const e=(0,u.P)((0,u.rJ)(c.db,"userInteractions"),(0,u._M)("userId","==",a.uid),(0,u._M)("action","==","simulate_scenario"),(0,u.My)("timestamp","desc"),..."all"!==v&&"individual"===E?[(0,u.AB)(v)]:[]),t=(0,u.aQ)(e,(e=>{const t=e.docs.map((e=>(0,r.A)({id:e.id},e.data()))).filter((e=>{var t;return null===(t=e.timestamp)||void 0===t?void 0:t.toDate}));if(F(t.length),"individual"===E){const e=("all"===v?t:t.slice(0,v)).reverse(),a=e.map(((e,t)=>{const a=e.timestamp.toDate(),r=a.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}),s=a.toLocaleDateString("en-US",{month:"short",day:"numeric"});return"S".concat(t+1," (").concat(s," ").concat(r,")")})),r=e.map((()=>Math.floor(100*Math.random())+1));D(a),S(r)}else{const e=new Date,a=new Date(e);"all"!==v&&a.setDate(a.getDate()-v);const r="all"===v?t:t.filter((e=>e.timestamp.toDate()>=a)),s={};r.forEach((e=>{const t=e.timestamp.toDate().toLocaleDateString("en-US",{month:"short",day:"numeric",year:"2-digit"});s[t]=(s[t]||0)+1}));const o=Object.keys(s).sort(((e,t)=>new Date(e+", 2024")-new Date(t+", 2024")));D(o),S(o.map((e=>s[e])))}}));return()=>t()}),[a,v,E]);const M={labels:A,datasets:[{label:"individual"===E?"Scenario Metrics":"Simulations Count",data:B,backgroundColor:"rgba(255, 165, 0, 0.8)",borderColor:"rgba(255, 140, 0, 1)",borderWidth:2,borderRadius:8,borderSkipped:!1}]},L={labels:A,datasets:[{label:"individual"===E?"Scenario Performance":"Daily Simulations",data:B,backgroundColor:"rgba(59, 130, 246, 0.1)",borderColor:"rgba(59, 130, 246, 1)",borderWidth:3,fill:!0,tension:.4,pointBackgroundColor:"rgba(59, 130, 246, 1)",pointBorderColor:"#ffffff",pointBorderWidth:2,pointRadius:6,pointHoverRadius:8}]},W={labels:A.map(((e,t)=>"Scenario ".concat(t+1))),datasets:[{label:"Scenarios",data:B,backgroundColor:["#FF6B6B","#4ECDC4","#45B7D1","#96CEB4","#FFEAA7","#DDA0DD","#98D8C8","#F7DC6F","#BB8FCE","#85C1E9","#F8C471","#82E0AA","#F1948A","#85929E","#FFA07A","#20B2AA","#87CEFA","#DEB887","#D3D3D3","#F0E68C","#EE82EE","#90EE90","#FFB6C1","#87CEEB","#DDA0DD","#98FB98","#F0E68C","#DB7093","#FF7F50","#6495ED","#DC143C","#00FFFF","#00008B","#008B8B","#B8860B","#A9A9A9","#006400","#BDB76B","#8B008B","#556B2F","#FF8C00","#9932CC"].slice(0,B.length),borderColor:"#ffffff",borderWidth:2,hoverBorderWidth:3}]},R={responsive:!0,maintainAspectRatio:!1,plugins:{tooltip:{mode:"index",intersect:!1,backgroundColor:"rgba(0, 0, 0, 0.8)",titleColor:"#ffffff",bodyColor:"#ffffff",borderColor:"rgba(255, 255, 255, 0.2)",borderWidth:1},legend:{position:"top",labels:{font:{size:12,weight:"bold"}}}},scales:{x:{beginAtZero:!0,grid:{color:"rgba(0, 0, 0, 0.1)"},ticks:{maxTicksLimit:10,font:{size:10}}},y:{beginAtZero:!0,grid:{color:"rgba(0, 0, 0, 0.1)"}}}},_={bar:o.A,line:n.A,pie:i.A};return(0,b.jsxs)("div",{ref:t,className:"w-full hover:shadow-2xl shadow-2xl hover:shadow-blue-400/30 transition-all duration-500 hover:scale-[1.02] hover:brightness-110 px-6 py-6 border border-gray-200 dark:border-gray-700 mt-8 bg-gradient-to-br from-white to-gray-50 dark:from-gray-800 dark:to-gray-900 rounded-2xl  hover:border-blue-500/25 dark:hover:border-blue-500/25 relative overflow-hidden",children:[(0,b.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-500/5 via-transparent to-blue-400/8 pointer-events-none rounded-2xl"}),(0,b.jsx)("div",{className:"absolute top-0 left-0 w-full h-full bg-gradient-to-br from-blue-300/3 via-transparent to-blue-600/6 pointer-events-none rounded-2xl"}),(0,b.jsxs)("div",{className:"relative z-10",children:[(0,b.jsxs)("div",{onClick:()=>k(!j),className:"flex items-center justify-between cursor-pointer mb-4 group",children:[(0,b.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,b.jsx)("h3",{className:"text-xl font-bold bg-gradient-to-r from-green-500 to-blue-500 bg-clip-text text-transparent",children:"Simulation Count"}),(0,b.jsxs)("span",{className:"bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-200 px-2 py-1 rounded-full text-xs font-semibold",children:[w," Total"]})]}),(0,b.jsx)("div",{className:"group-hover:scale-110 transition-transform duration-200",children:j?(0,b.jsx)(l.A,{className:"text-blue-500 dark:text-blue-400",size:24}):(0,b.jsx)(d.A,{className:"text-blue-500 dark:text-blue-400",size:24})})]}),(0,b.jsxs)("div",{className:"transition-all duration-500 ease-in-out overflow-hidden ".concat(j?"flex-1 min-h-[400px] opacity-100":"max-h-0 opacity-0"),children:[(0,b.jsx)("div",{className:"flex flex-wrap gap-3 mb-6",children:["bar","line","pie"].map((e=>{const t=_[e];return(0,b.jsxs)("button",{onClick:()=>p(e),className:"flex items-center space-x-2 px-4 py-2 rounded-xl font-semibold transition-all duration-200 transform hover:scale-105 ".concat(x===e?"bg-gradient-to-r from-blue-500 to-purple-600 text-white shadow-lg":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"),children:[(0,b.jsx)(t,{size:16}),(0,b.jsxs)("span",{children:[e.charAt(0).toUpperCase()+e.slice(1)," Chart"]})]},e)}))}),(0,b.jsx)("div",{className:"flex justify-end space-x-2 mb-6",children:[10,25,50,100,"all"].map((e=>(0,b.jsx)("button",{onClick:()=>y(e),className:"py-2 px-4 text-sm rounded-lg font-medium transition-all duration-200 hover:scale-105 ".concat(v===e?"bg-gradient-to-r from-blue-600 to-purple-600 text-white shadow-md":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"),children:"all"===e?"All Scenarios":"Last ".concat(e)},e)))}),(0,b.jsx)("div",{className:"relative flex-1 min-h-[400px] mb-4 bg-white dark:bg-gray-800 rounded-xl p-4 shadow-inner",children:C?(0,b.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-4 border-blue-500 mx-auto mb-4"}),(0,b.jsx)("p",{className:"text-gray-600 dark:text-gray-400 font-medium",children:"Loading scenario data..."})]})}):0===B.length?(0,b.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("div",{className:"text-6xl mb-4",children:"\ud83d\udcca"}),(0,b.jsx)("p",{className:"text-gray-500 dark:text-gray-400 text-lg font-medium",children:"No scenarios found"}),(0,b.jsx)("p",{className:"text-gray-400 dark:text-gray-500 text-sm",children:"Run some scenarios to see your analytics"})]})}):(0,b.jsxs)(s.Suspense,{fallback:(0,b.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,b.jsx)("div",{className:"animate-pulse text-blue-500",children:"Loading chart..."})}),children:["bar"===x&&(0,b.jsx)(h,{data:M,options:R}),"line"===x&&(0,b.jsx)(g,{data:L,options:R}),"pie"===x&&(0,b.jsx)(f,{data:W,options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"right",labels:{boxWidth:12,font:{size:10},generateLabels:function(e){const t=e.data;return t.labels.length&&t.datasets.length?t.labels.map(((e,a)=>({text:"S".concat(a+1),fillStyle:t.datasets[0].backgroundColor[a],strokeStyle:t.datasets[0].borderColor,lineWidth:t.datasets[0].borderWidth,hidden:!1,index:a}))):[]}}},tooltip:{callbacks:{label:function(e){return"".concat(e.label,": ").concat(e.parsed)}}}}}})]})}),B.length>0&&(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mt-4",children:[(0,b.jsxs)("div",{className:"bg-gradient-to-r from-blue-500 to-blue-600 text-white p-4 rounded-xl",children:[(0,b.jsx)("h4",{className:"text-sm font-medium opacity-90",children:"Total Scenarios"}),(0,b.jsx)("p",{className:"text-2xl font-bold",children:w})]}),(0,b.jsxs)("div",{className:"bg-gradient-to-r from-green-500 to-green-600 text-white p-4 rounded-xl",children:[(0,b.jsx)("h4",{className:"text-sm font-medium opacity-90",children:"Average Score"}),(0,b.jsx)("p",{className:"text-2xl font-bold",children:(B.reduce(((e,t)=>e+t),0)/B.length).toFixed(1)})]}),(0,b.jsxs)("div",{className:"bg-gradient-to-r from-purple-500 to-purple-600 text-white p-4 rounded-xl",children:[(0,b.jsx)("h4",{className:"text-sm font-medium opacity-90",children:"Best Score"}),(0,b.jsx)("p",{className:"text-2xl font-bold",children:Math.max(...B)})]})]})]})]})]})}))}}]);
//# sourceMappingURL=464.b067177b.chunk.js.map