/*! For license information please see 627.cae62657.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkomnis=self.webpackChunkomnis||[]).push([[627],{2382:(e,a,t)=>{t.d(a,{A:()=>r});const r=(0,t(7784).A)("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]])},2627:(e,a,t)=>{t.r(a),t.d(a,{default:()=>u});var r=t(5043),o=t(2382),s=t(8326),l=t(7304),d=t(5399),n=t(5472),i=t(9613),c=t(579);const b=(0,r.lazy)((()=>t.e(58).then(t.bind(t,6058)).then((e=>({default:e.Doughnut})))));l.t1.register(l.Bs,l.m_,l.s$);const m={Finance:{bg:"#0ea5e9",border:"#0284c7"},Healthcare:{bg:"#06b6d4",border:"#0891b2"},Economics:{bg:"#14b8a6",border:"#0d9488"},Technology:{bg:"#10b981",border:"#059669"},Retail:{bg:"#22c55e",border:"#16a34a"},Agriculture:{bg:"#84cc16",border:"#65a30d"},Energy:{bg:"#f59e0b",border:"#d97706"},Education:{bg:"#8b5cf6",border:"#7c3aed"},Manufacturing:{bg:"#ec4899",border:"#db2777"},Transportation:{bg:"#ef4444",border:"#dc2626"},"Real Estate":{bg:"#06b6d4",border:"#0891b2"},Entertainment:{bg:"#f97316",border:"#ea580c"},Other:{bg:"#64748b",border:"#475569"}},g=[{bg:"#8b5cf6",border:"#7c3aed"},{bg:"#ec4899",border:"#db2777"},{bg:"#f59e0b",border:"#d97706"},{bg:"#ef4444",border:"#dc2626"},{bg:"#06b6d4",border:"#0891b2"},{bg:"#f97316",border:"#ea580c"},{bg:"#64748b",border:"#475569"}],u=(0,r.forwardRef)(((e,a)=>{const[t,l]=(0,r.useState)(!1),[u,h]=(0,r.useState)(!1),[x,f]=(0,r.useState)(null),[v,p]=(0,r.useState)(null),{user:y}=(0,i.As)(),k=async()=>{if(y){h(!0),p(null);try{console.log("\ud83d\udd0d Fetching category data for user:",y.uid);const e=(0,n.rJ)(d.db,"users",y.uid,"userInteractions"),a=(0,n.P)(e),t=await(0,n.GG)(a),r=[];t.forEach((e=>{const a=e.data();r.push(a)})),console.log("\ud83d\udcca Raw interactions data:",r);const o={};if(r.forEach((e=>{if(e.category&&""!==e.category.trim()){const a=e.category.trim();o[a]=(o[a]||0)+1}})),console.log("\ud83d\udcc8 Category counts:",o),0===Object.keys(o).length)return f({labels:["No Categories Yet"],datasets:[{label:"Scenario Count",data:[1],backgroundColor:["#e2e8f0"],borderColor:["#cbd5e1"],borderWidth:2}]}),void h(!1);const s=Object.keys(o),l=Object.values(o),i=[],c=[];s.forEach(((e,a)=>{const t=((e,a)=>m[e]?m[e]:g[a%g.length])(e,a);i.push(t.bg),c.push(t.border)}));const b={labels:s,datasets:[{label:"Scenario Count",data:l,backgroundColor:i,borderColor:c,borderWidth:2,hoverBorderWidth:3,hoverBorderColor:"#ffffff"}]};console.log("\ud83c\udfa8 Final chart data:",b),f(b)}catch(v){console.error("\u274c Error fetching category data:",v),p("Failed to load category data"),f({labels:["Error Loading Data"],datasets:[{label:"Scenario Count",data:[1],backgroundColor:["#ef4444"],borderColor:["#dc2626"],borderWidth:2}]})}finally{h(!1)}}else p("User not authenticated")};(0,r.useEffect)((()=>{t&&!x&&k()}),[t,y]);return(0,c.jsxs)("div",{ref:a,className:"w-full mt-8 bg-gradient-to-br from-slate-50 via-white to-cyan-50/30 dark:from-slate-900 dark:via-slate-800 dark:to-teal-900/20 hover:shadow-cyan-500/25 transition-all duration-500 ease-out px-8 py-8 border border-slate-200/60 dark:border-slate-700/60 rounded-2xl shadow-2xl hover:shadow-cyan-500/30 backdrop-blur-sm",children:[(0,c.jsxs)("div",{onClick:()=>l((e=>!e)),className:"flex items-center justify-between cursor-pointer mb-6 group",children:[(0,c.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,c.jsx)("div",{className:"flex items-center justify-center w-10 h-10 bg-gradient-to-br from-cyan-500 to-teal-600 rounded-xl shadow-lg",children:(0,c.jsx)("span",{className:"text-white text-lg font-bold",children:"\ud83d\udcca"})}),(0,c.jsxs)("div",{children:[(0,c.jsx)("h2",{className:"text-2xl font-bold bg-gradient-to-r from-cyan-600 via-teal-600 to-emerald-600 dark:from-cyan-400 dark:via-teal-400 dark:to-emerald-400 bg-clip-text text-transparent group-hover:from-cyan-700 group-hover:via-teal-700 group-hover:to-emerald-700 dark:group-hover:from-cyan-300 dark:group-hover:via-teal-300 dark:group-hover:to-emerald-300 transition-all duration-300",children:"Scenario Category Distribution"}),(0,c.jsx)("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1",children:x&&x.datasets[0]?"".concat(x.datasets[0].data.reduce(((e,a)=>e+a),0)," total scenarios across ").concat(x.labels.length," categories"):"Click to view your scenario categories"})]})]}),(0,c.jsx)("div",{className:"flex items-center justify-center w-10 h-10 bg-gradient-to-br from-cyan-100 to-teal-100 dark:from-cyan-800/50 dark:to-teal-800/50 rounded-xl group-hover:from-cyan-200 group-hover:to-teal-200 dark:group-hover:from-cyan-700/60 dark:group-hover:to-teal-700/60 transition-all duration-300",children:t?(0,c.jsx)(o.A,{className:"text-cyan-600 dark:text-cyan-400 group-hover:text-cyan-700 dark:group-hover:text-cyan-300 transition-colors duration-200",size:20}):(0,c.jsx)(s.A,{className:"text-cyan-600 dark:text-cyan-400 group-hover:text-cyan-700 dark:group-hover:text-cyan-300 transition-colors duration-200",size:20})})]}),(0,c.jsxs)("div",{className:"transition-all duration-500 ease-in-out overflow-hidden ".concat(t?"max-h-[600px] opacity-100":"max-h-0 opacity-0"),children:[(0,c.jsx)("div",{className:"h-96 flex items-center justify-center transition-all duration-300 bg-gradient-to-br from-white via-slate-50/50 to-cyan-50/30 dark:from-slate-800 dark:via-slate-800/80 dark:to-teal-900/20 rounded-2xl border border-slate-200/80 dark:border-slate-700/60 shadow-inner p-6",children:u?(0,c.jsxs)("div",{className:"w-full h-full relative overflow-hidden rounded-2xl",children:[(0,c.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-slate-200 via-cyan-100 to-slate-200 dark:from-slate-700 dark:via-cyan-800/30 dark:to-slate-700 animate-pulse"}),(0,c.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/30 to-transparent dark:via-cyan-400/10 animate-shimmer",style:{backgroundImage:"linear-gradient(90deg, transparent, rgba(14, 165, 233, 0.2), transparent)",backgroundSize:"200% 100%",animation:"shimmer 2s ease-in-out infinite"}}),(0,c.jsx)("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-40 h-40 bg-gradient-to-br from-cyan-300 to-teal-300 dark:from-cyan-600 dark:to-teal-600 rounded-full animate-pulse shadow-2xl"}),(0,c.jsx)("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-20 h-20 bg-gradient-to-br from-white to-slate-100 dark:from-slate-800 dark:to-slate-700 rounded-full animate-pulse"}),(0,c.jsxs)("div",{className:"absolute top-6 right-6 space-y-2",children:[(0,c.jsx)("div",{className:"w-24 h-3 bg-gradient-to-r from-cyan-300 to-teal-300 dark:from-cyan-600 dark:to-teal-600 rounded animate-pulse"}),(0,c.jsx)("div",{className:"w-20 h-3 bg-gradient-to-r from-teal-300 to-emerald-300 dark:from-teal-600 dark:to-emerald-600 rounded animate-pulse"}),(0,c.jsx)("div",{className:"w-28 h-3 bg-gradient-to-r from-emerald-300 to-cyan-300 dark:from-emerald-600 dark:to-cyan-600 rounded animate-pulse"})]}),(0,c.jsx)("div",{className:"absolute bottom-6 left-6 right-6",children:(0,c.jsx)("div",{className:"text-center text-slate-600 dark:text-slate-400 text-sm",children:"Loading your scenario categories..."})})]}):v?(0,c.jsxs)("div",{className:"text-center",children:[(0,c.jsx)("div",{className:"text-red-500 dark:text-red-400 text-lg mb-2",children:"\u26a0\ufe0f"}),(0,c.jsx)("p",{className:"text-red-600 dark:text-red-400 text-sm",children:v}),(0,c.jsx)("button",{onClick:()=>{p(null),k()},className:"mt-4 px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors text-sm",children:"Retry"})]}):x?(0,c.jsx)(r.Suspense,{fallback:(0,c.jsx)("div",{className:"w-full h-full relative overflow-hidden rounded-2xl",children:(0,c.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-slate-200 via-cyan-100 to-slate-200 dark:from-slate-700 dark:via-cyan-800/30 dark:to-slate-700 animate-pulse"})}),children:(0,c.jsx)(b,{data:x,options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"right",labels:{color:"#64748b",font:{size:13,weight:"500"},padding:20,usePointStyle:!0,pointStyle:"circle"}},tooltip:{backgroundColor:"rgba(8, 51, 68, 0.95)",titleColor:"#f8fafc",bodyColor:"#e2e8f0",borderColor:"#0ea5e9",borderWidth:1,cornerRadius:12,displayColors:!0,padding:14,titleFont:{size:13,weight:"bold"},bodyFont:{size:12},callbacks:{label:function(e){const a=e.label||"",t=e.parsed||0,r=(t/e.dataset.data.reduce(((e,a)=>e+a),0)*100).toFixed(1);return"".concat(a,": ").concat(t," scenarios (").concat(r,"%)")}}}}}})}):(0,c.jsxs)("div",{className:"text-center text-slate-500 dark:text-slate-400",children:[(0,c.jsx)("div",{className:"text-4xl mb-4",children:"\ud83d\udcca"}),(0,c.jsx)("p",{children:"No data available"})]})}),x&&x.labels.length>0&&"No Categories Yet"!==x.labels[0]&&"Error Loading Data"!==x.labels[0]&&(0,c.jsx)("div",{className:"mt-6 grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:x.labels.map(((e,a)=>{const t=x.datasets[0].data[a],r=x.datasets[0].backgroundColor[a];return(0,c.jsx)("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-4 border border-slate-200 dark:border-slate-700 shadow-sm",children:(0,c.jsxs)("div",{className:"flex items-center gap-3",children:[(0,c.jsx)("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:r}}),(0,c.jsxs)("div",{children:[(0,c.jsx)("p",{className:"font-medium text-slate-800 dark:text-slate-200 text-sm",children:e}),(0,c.jsxs)("p",{className:"text-slate-500 dark:text-slate-400 text-xs",children:[t," scenarios"]})]})]})},e)}))})]}),(0,c.jsx)("style",{children:"\n        @keyframes shimmer {\n          0% { transform: translateX(-100%); }\n          100% { transform: translateX(100%); }\n        }\n        .animate-shimmer {\n          animation: shimmer 2s ease-in-out infinite;\n        }\n      "})]})}))}}]);
//# sourceMappingURL=627.cae62657.chunk.js.map