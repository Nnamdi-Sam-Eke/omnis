{"version":3,"file":"static/js/464.b067177b.chunk.js","mappings":"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","sources":["../node_modules/lucide-react/src/icons/chevron-down.ts","../node_modules/lucide-react/src/icons/chart-pie.ts","components/DashboardCharts.js"],"sourcesContent":["import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [['path', { d: 'm6 9 6 6 6-6', key: 'qrunsl' }]];\n\n/**\n * @component @name ChevronDown\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJtNiA5IDYgNiA2LTYiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/chevron-down\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst ChevronDown = createLucideIcon('chevron-down', __iconNode);\n\nexport default ChevronDown;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  [\n    'path',\n    {\n      d: 'M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z',\n      key: 'pzmjnu',\n    },\n  ],\n  ['path', { d: 'M21.21 15.89A10 10 0 1 1 8 2.83', key: 'k2fpak' }],\n];\n\n/**\n * @component @name ChartPie\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMjEgMTJjLjU1MiAwIDEuMDA1LS40NDkuOTUtLjk5OGExMCAxMCAwIDAgMC04Ljk1My04Ljk1MWMtLjU1LS4wNTUtLjk5OC4zOTgtLjk5OC45NXY4YTEgMSAwIDAgMCAxIDF6IiAvPgogIDxwYXRoIGQ9Ik0yMS4yMSAxNS44OUExMCAxMCAwIDEgMSA4IDIuODMiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/chart-pie\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst ChartPie = createLucideIcon('chart-pie', __iconNode);\n\nexport default ChartPie;\n","import React, { useState, useEffect, Suspense, lazy, forwardRef } from 'react';\r\nimport { ChevronDown, ChevronRight, BarChart3, TrendingUp, PieChart } from 'lucide-react';\r\nimport { db } from '../firebase';\r\n  import { getDocs } from \"firebase/firestore\";\r\nimport { useAuth } from '../AuthContext';\r\nimport {\r\n  collection,\r\n  onSnapshot,\r\n  query,\r\n  where,\r\n  orderBy,\r\n  limit,\r\n} from 'firebase/firestore';\r\n\r\nimport {\r\n  Chart as ChartJS,\r\n  CategoryScale,\r\n  LinearScale,\r\n  BarElement,\r\n  PointElement,\r\n  LineElement,\r\n  ArcElement,\r\n  Tooltip,\r\n  Legend,\r\n} from 'chart.js';\r\n\r\nChartJS.register(\r\n  CategoryScale,\r\n  LinearScale,\r\n  BarElement,\r\n  PointElement,\r\n  LineElement,\r\n  ArcElement,\r\n  Tooltip,\r\n  Legend\r\n);\r\n\r\nconst BarChart = lazy(() => import(\"react-chartjs-2\").then(mod => ({ default: mod.Bar })));\r\nconst LineChart = lazy(() => import(\"react-chartjs-2\").then(mod => ({ default: mod.Line })));\r\nconst DoughnutChart = lazy(() => import(\"react-chartjs-2\").then(mod => ({ default: mod.Doughnut })));\r\n\r\nconst DashboardCharts = forwardRef((props, ref) => {\r\n  const { user } = useAuth();\r\n  const [activeChart, setActiveChart] = useState(\"bar\");\r\n  const [range, setRange] = useState(50);\r\n  const [isOpen, setIsOpen] = useState(false); // 👈 Starts collapsed\r\n  const [loading, setLoading] = useState(false);\r\n  const [labels, setLabels] = useState([]);\r\n  const [baseData, setBaseData] = useState([]);\r\n  const [totalScenarios, setTotalScenarios] = useState(0);\r\n  const [viewMode, setViewMode] = useState('individual');\r\n\r\n\r\nuseEffect(() => {\r\n  if (!user) return;\r\n\r\n  const fetchTotalSimulations = async () => {\r\n    const snapshot = await getDocs(query(\r\n      collection(db, 'userInteractions'),\r\n      where('userId', '==', user.uid),\r\n      where('action', '==', 'simulate_scenario')\r\n    ));\r\n    setTotalScenarios(snapshot.docs.length);\r\n  };\r\n\r\n  fetchTotalSimulations();\r\n}, [user]);\r\n\r\n\r\n  useEffect(() => {\r\n    if (isOpen) {\r\n      setLoading(true);\r\n      const t = setTimeout(() => {\r\n        setLoading(false);\r\n      \r\n      }, 1500);\r\n      return () => clearTimeout(t);\r\n    }\r\n  }, [isOpen]);\r\n\r\n  useEffect(() => {\r\n    if (!user) return;\r\n\r\n    const simulationQuery = query(\r\n      collection(db, 'userInteractions'),\r\n      where('userId', '==', user.uid),\r\n      where('action', '==', 'simulate_scenario'),\r\n      orderBy('timestamp', 'desc'),\r\n      ...(range !== 'all' && viewMode === 'individual' ? [limit(range)] : [])\r\n    );\r\n\r\n    const unsubscribe = onSnapshot(simulationQuery, (snapshot) => {\r\n      const simulations = snapshot.docs\r\n        .map(doc => ({ id: doc.id, ...doc.data() }))\r\n        .filter(sim => sim.timestamp?.toDate);\r\n\r\n      setTotalScenarios(simulations.length);\r\n\r\n      if (viewMode === 'individual') {\r\n        const limitedSimulations = range === 'all' ? simulations : simulations.slice(0, range);\r\n        const reversedSimulations = limitedSimulations.reverse();\r\n\r\n        const scenarioLabels = reversedSimulations.map((sim, index) => {\r\n          const date = sim.timestamp.toDate();\r\n          const timeStr = date.toLocaleTimeString('en-US', { hour: '2-digit', minute: '2-digit' });\r\n          const dateStr = date.toLocaleDateString('en-US', { month: 'short', day: 'numeric' });\r\n          return `S${index + 1} (${dateStr} ${timeStr})`;\r\n        });\r\n\r\n        const scenarioData = reversedSimulations.map(() =>\r\n          Math.floor(Math.random() * 100) + 1\r\n        );\r\n\r\n        setLabels(scenarioLabels);\r\n        setBaseData(scenarioData);\r\n      } else {\r\n        const now = new Date();\r\n        const cutoff = new Date(now);\r\n        if (range !== 'all') {\r\n          cutoff.setDate(cutoff.getDate() - range);\r\n        }\r\n\r\n        const filteredSimulations = range === 'all'\r\n          ? simulations\r\n          : simulations.filter(sim => sim.timestamp.toDate() >= cutoff);\r\n\r\n        const aggregationMap = {};\r\n        filteredSimulations.forEach(sim => {\r\n          const dateStr = sim.timestamp.toDate().toLocaleDateString('en-US', {\r\n            month: 'short',\r\n            day: 'numeric',\r\n            year: '2-digit'\r\n          });\r\n          aggregationMap[dateStr] = (aggregationMap[dateStr] || 0) + 1;\r\n        });\r\n\r\n        const sortedKeys = Object.keys(aggregationMap).sort((a, b) =>\r\n          new Date(a + ', 2024') - new Date(b + ', 2024')\r\n        );\r\n\r\n        setLabels(sortedKeys);\r\n        setBaseData(sortedKeys.map(key => aggregationMap[key]));\r\n      }\r\n    });\r\n\r\n    return () => unsubscribe();\r\n  }, [user, range, viewMode]);\r\n\r\n  const chartData = {\r\n    labels,\r\n    datasets: [\r\n      {\r\n        label: viewMode === 'individual' ? \"Scenario Metrics\" : \"Simulations Count\",\r\n        data: baseData,\r\n        backgroundColor: \"rgba(255, 165, 0, 0.8)\",\r\n        borderColor: \"rgba(255, 140, 0, 1)\",\r\n        borderWidth: 2,\r\n        borderRadius: 8,\r\n        borderSkipped: false,\r\n      },\r\n    ],\r\n  };\r\n\r\n  const lineChartData = {\r\n    labels,\r\n    datasets: [\r\n      {\r\n        label: viewMode === 'individual' ? \"Scenario Performance\" : \"Daily Simulations\",\r\n        data: baseData,\r\n        backgroundColor: \"rgba(59, 130, 246, 0.1)\",\r\n        borderColor: \"rgba(59, 130, 246, 1)\",\r\n        borderWidth: 3,\r\n        fill: true,\r\n        tension: 0.4,\r\n        pointBackgroundColor: \"rgba(59, 130, 246, 1)\",\r\n        pointBorderColor: \"#ffffff\",\r\n        pointBorderWidth: 2,\r\n        pointRadius: 6,\r\n        pointHoverRadius: 8,\r\n      },\r\n    ],\r\n  };\r\n\r\n  const colorPalette = [/* same array as before... */ \"#FF6B6B\", \"#4ECDC4\", \"#45B7D1\", \"#96CEB4\", \"#FFEAA7\", \"#DDA0DD\", \"#98D8C8\", \"#F7DC6F\", \"#BB8FCE\", \"#85C1E9\", \"#F8C471\", \"#82E0AA\", \"#F1948A\", \"#85929E\", \"#FFA07A\", \"#20B2AA\", \"#87CEFA\", \"#DEB887\", \"#D3D3D3\", \"#F0E68C\", \"#EE82EE\", \"#90EE90\", \"#FFB6C1\", \"#87CEEB\", \"#DDA0DD\", \"#98FB98\", \"#F0E68C\", \"#DB7093\", \"#FF7F50\", \"#6495ED\", \"#DC143C\", \"#00FFFF\", \"#00008B\", \"#008B8B\", \"#B8860B\", \"#A9A9A9\", \"#006400\", \"#BDB76B\", \"#8B008B\", \"#556B2F\", \"#FF8C00\", \"#9932CC\"];\r\n\r\n  const pieData = {\r\n    labels: labels.map((label, index) => `Scenario ${index + 1}`),\r\n    datasets: [\r\n      {\r\n        label: \"Scenarios\",\r\n        data: baseData,\r\n        backgroundColor: colorPalette.slice(0, baseData.length),\r\n        borderColor: '#ffffff',\r\n        borderWidth: 2,\r\n        hoverBorderWidth: 3,\r\n      },\r\n    ],\r\n  };\r\n\r\n  const pieOptions = {\r\n    responsive: true,\r\n    maintainAspectRatio: false,\r\n    plugins: {\r\n      legend: {\r\n        position: \"right\",\r\n        labels: {\r\n          boxWidth: 12,\r\n          font: { size: 10 },\r\n          generateLabels: function (chart) {\r\n            const data = chart.data;\r\n            if (data.labels.length && data.datasets.length) {\r\n              return data.labels.map((label, index) => ({\r\n                text: `S${index + 1}`,\r\n                fillStyle: data.datasets[0].backgroundColor[index],\r\n                strokeStyle: data.datasets[0].borderColor,\r\n                lineWidth: data.datasets[0].borderWidth,\r\n                hidden: false,\r\n                index: index\r\n              }));\r\n            }\r\n            return [];\r\n          }\r\n        }\r\n      },\r\n      tooltip: {\r\n        callbacks: {\r\n          label: function (context) {\r\n            return `${context.label}: ${context.parsed}`;\r\n          }\r\n        }\r\n      },\r\n    },\r\n  };\r\n\r\n  const commonOptions = {\r\n    responsive: true,\r\n    maintainAspectRatio: false,\r\n    plugins: {\r\n      tooltip: {\r\n        mode: \"index\",\r\n        intersect: false,\r\n        backgroundColor: 'rgba(0, 0, 0, 0.8)',\r\n        titleColor: '#ffffff',\r\n        bodyColor: '#ffffff',\r\n        borderColor: 'rgba(255, 255, 255, 0.2)',\r\n        borderWidth: 1,\r\n      },\r\n      legend: {\r\n        position: \"top\",\r\n        labels: {\r\n          font: { size: 12, weight: 'bold' }\r\n        }\r\n      },\r\n    },\r\n    scales: {\r\n      x: {\r\n        beginAtZero: true,\r\n        grid: { color: 'rgba(0, 0, 0, 0.1)' },\r\n        ticks: { maxTicksLimit: 10, font: { size: 10 } }\r\n      },\r\n      y: {\r\n        beginAtZero: true,\r\n        grid: { color: 'rgba(0, 0, 0, 0.1)' }\r\n      },\r\n    },\r\n  };\r\n\r\n  const chartIcons = {\r\n    bar: BarChart3,\r\n    line: TrendingUp,\r\n    pie: PieChart,\r\n  };\r\n\r\n  return (\r\n    <div \r\n      ref={ref} \r\n      className=\"w-full hover:shadow-2xl shadow-2xl hover:shadow-blue-400/30 transition-all duration-500 hover:scale-[1.02] hover:brightness-110 px-6 py-6 border border-gray-200 dark:border-gray-700 mt-8 bg-gradient-to-br from-white to-gray-50 dark:from-gray-800 dark:to-gray-900 rounded-2xl  hover:border-blue-500/25 dark:hover:border-blue-500/25 relative overflow-hidden\"\r\n    >\r\n      {/* Subtle Blue Brush Overlay */}\r\n      <div className=\"absolute inset-0 bg-gradient-to-r from-blue-500/5 via-transparent to-blue-400/8 pointer-events-none rounded-2xl\"></div>\r\n      <div className=\"absolute top-0 left-0 w-full h-full bg-gradient-to-br from-blue-300/3 via-transparent to-blue-600/6 pointer-events-none rounded-2xl\"></div>\r\n      \r\n      {/* Content container with relative positioning to stay above overlay */}\r\n      <div className=\"relative z-10\">\r\n        <div onClick={() => setIsOpen(!isOpen)} className=\"flex items-center justify-between cursor-pointer mb-4 group\">\r\n          <div className=\"flex items-center space-x-3\">\r\n            <h3 className=\"text-xl font-bold bg-gradient-to-r from-green-500 to-blue-500 bg-clip-text text-transparent\">\r\n              Simulation Count\r\n            </h3>\r\n            <span className=\"bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-200 px-2 py-1 rounded-full text-xs font-semibold\">\r\n              {totalScenarios} Total\r\n            </span>\r\n          </div>\r\n          <div className=\"group-hover:scale-110 transition-transform duration-200\">\r\n            {isOpen ? (\r\n              <ChevronDown className=\"text-blue-500 dark:text-blue-400\" size={24} />\r\n            ) : (\r\n              <ChevronRight className=\"text-blue-500 dark:text-blue-400\" size={24} />\r\n            )}\r\n          </div>\r\n        </div>\r\n\r\n        <div className={`transition-all duration-500 ease-in-out overflow-hidden ${isOpen ? 'flex-1 min-h-[400px] opacity-100' : 'max-h-0 opacity-0'}`}>\r\n          <div className=\"flex flex-wrap gap-3 mb-6\">\r\n            {[\"bar\", \"line\", \"pie\"].map(type => {\r\n              const Icon = chartIcons[type];\r\n              return (\r\n                <button\r\n                  key={type}\r\n                  onClick={() => setActiveChart(type)}\r\n                  className={`flex items-center space-x-2 px-4 py-2 rounded-xl font-semibold transition-all duration-200 transform hover:scale-105 ${\r\n                    activeChart === type\r\n                      ? \"bg-gradient-to-r from-blue-500 to-purple-600 text-white shadow-lg\"\r\n                      : \"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600\"\r\n                  }`}\r\n                >\r\n                  <Icon size={16} />\r\n                  <span>{type.charAt(0).toUpperCase() + type.slice(1)} Chart</span>\r\n                </button>\r\n              );\r\n            })}\r\n          </div>\r\n\r\n          <div className=\"flex justify-end space-x-2 mb-6\">\r\n            {[10, 25, 50, 100, 'all'].map(d => (\r\n              <button\r\n                key={d}\r\n                onClick={() => setRange(d)}\r\n                className={`py-2 px-4 text-sm rounded-lg font-medium transition-all duration-200 hover:scale-105 ${\r\n                  range === d\r\n                    ? 'bg-gradient-to-r from-blue-600 to-purple-600 text-white shadow-md'\r\n                    : 'bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600'\r\n                }`}\r\n              >\r\n                {d === 'all' ? 'All Scenarios' : `Last ${d}`}\r\n              </button>\r\n            ))}\r\n          </div>\r\n\r\n          <div className=\"relative flex-1 min-h-[400px] mb-4 bg-white dark:bg-gray-800 rounded-xl p-4 shadow-inner\">\r\n            {loading ? (\r\n              <div className=\"flex items-center justify-center h-full\">\r\n                <div className=\"text-center\">\r\n                  <div className=\"animate-spin rounded-full h-12 w-12 border-b-4 border-blue-500 mx-auto mb-4\"></div>\r\n                  <p className=\"text-gray-600 dark:text-gray-400 font-medium\">Loading scenario data...</p>\r\n                </div>\r\n              </div>\r\n            ) : baseData.length === 0 ? (\r\n              <div className=\"flex items-center justify-center h-full\">\r\n                <div className=\"text-center\">\r\n                  <div className=\"text-6xl mb-4\">📊</div>\r\n                  <p className=\"text-gray-500 dark:text-gray-400 text-lg font-medium\">No scenarios found</p>\r\n                  <p className=\"text-gray-400 dark:text-gray-500 text-sm\">Run some scenarios to see your analytics</p>\r\n                </div>\r\n              </div>\r\n            ) : (\r\n              <Suspense fallback={<div className=\"flex items-center justify-center h-full\"><div className=\"animate-pulse text-blue-500\">Loading chart...</div></div>}>\r\n                {activeChart === \"bar\" && <BarChart data={chartData} options={commonOptions} />}\r\n                {activeChart === \"line\" && <LineChart data={lineChartData} options={commonOptions} />}\r\n                {activeChart === \"pie\" && <DoughnutChart data={pieData} options={pieOptions} />}\r\n              </Suspense>\r\n            )}\r\n          </div>\r\n\r\n          {baseData.length > 0 && (\r\n            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4 mt-4\">\r\n              <div className=\"bg-gradient-to-r from-blue-500 to-blue-600 text-white p-4 rounded-xl\">\r\n                <h4 className=\"text-sm font-medium opacity-90\">Total Scenarios</h4>\r\n                <p className=\"text-2xl font-bold\">{totalScenarios}</p>\r\n              </div>\r\n              <div className=\"bg-gradient-to-r from-green-500 to-green-600 text-white p-4 rounded-xl\">\r\n                <h4 className=\"text-sm font-medium opacity-90\">Average Score</h4>\r\n                <p className=\"text-2xl font-bold\">\r\n                  {(baseData.reduce((a, b) => a + b, 0) / baseData.length).toFixed(1)}\r\n                </p>\r\n              </div>\r\n              <div className=\"bg-gradient-to-r from-purple-500 to-purple-600 text-white p-4 rounded-xl\">\r\n                <h4 className=\"text-sm font-medium opacity-90\">Best Score</h4>\r\n                <p className=\"text-2xl font-bold\">{Math.max(...baseData)}</p>\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n});\r\n\r\nexport default DashboardCharts;"],"names":["ChevronDown","createLucideIcon","d","key","ChartPie","ChartJS","register","CategoryScale","LinearScale","BarElement","PointElement","LineElement","ArcElement","Tooltip","Legend","BarChart","lazy","then","mod","default","Bar","LineChart","Line","DoughnutChart","Doughnut","forwardRef","props","ref","user","useAuth","activeChart","setActiveChart","useState","range","setRange","isOpen","setIsOpen","loading","setLoading","labels","setLabels","baseData","setBaseData","totalScenarios","setTotalScenarios","viewMode","setViewMode","useEffect","async","snapshot","getDocs","query","collection","db","where","uid","docs","length","fetchTotalSimulations","t","setTimeout","clearTimeout","simulationQuery","orderBy","limit","unsubscribe","onSnapshot","simulations","map","doc","_objectSpread","id","data","filter","sim","_sim$timestamp","timestamp","toDate","reversedSimulations","slice","reverse","scenarioLabels","index","date","timeStr","toLocaleTimeString","hour","minute","dateStr","toLocaleDateString","month","day","concat","scenarioData","Math","floor","random","now","Date","cutoff","setDate","getDate","filteredSimulations","aggregationMap","forEach","year","sortedKeys","Object","keys","sort","a","b","chartData","datasets","label","backgroundColor","borderColor","borderWidth","borderRadius","borderSkipped","lineChartData","fill","tension","pointBackgroundColor","pointBorderColor","pointBorderWidth","pointRadius","pointHoverRadius","pieData","hoverBorderWidth","commonOptions","responsive","maintainAspectRatio","plugins","tooltip","mode","intersect","titleColor","bodyColor","legend","position","font","size","weight","scales","x","beginAtZero","grid","color","ticks","maxTicksLimit","y","chartIcons","bar","BarChart3","line","TrendingUp","pie","PieChart","_jsxs","className","children","_jsx","onClick","ChevronRight","type","Icon","charAt","toUpperCase","Suspense","fallback","options","boxWidth","generateLabels","chart","text","fillStyle","strokeStyle","lineWidth","hidden","callbacks","context","parsed","reduce","toFixed","max"],"sourceRoot":""}