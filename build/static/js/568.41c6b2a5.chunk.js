"use strict";(self.webpackChunkomnis=self.webpackChunkomnis||[]).push([[568],{1568:(e,r,s)=>{s.r(r),s.d(r,{default:()=>d});var t=s(5043),a=s(2395),l=s(9613),i=s(579);const d=e=>{var r;let{userDetails:s,discountActive:d}=e;const[n,o]=(0,t.useState)(!0),{user:c}=((0,a.Uz)(),(0,l.As)());(0,t.useEffect)((()=>{const e=setTimeout((()=>o(!1)),3e3);return()=>clearTimeout(e)}),[]);const u=async e=>{if(!c)return alert("User not logged in.");const r=await fetch("/api/create-checkout-session",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:c.uid,email:c.email,priceId:e})}),s=await r.json();null!==s&&void 0!==s&&s.url?window.location.href=s.url:alert("Failed to initiate upgrade session.")};return n?(0,i.jsxs)("div",{className:"animate-pulse space-y-4",children:[(0,i.jsx)("div",{className:"h-6 w-3/4 bg-gray-300 dark:bg-gray-700 rounded"}),(0,i.jsx)("div",{className:"h-6 w-1/2 bg-gray-300 dark:bg-gray-700 rounded"}),(0,i.jsx)("div",{className:"h-6 w-2/3 bg-gray-300 dark:bg-gray-700 rounded"})]}):(0,i.jsxs)("div",{className:"space-y-6",children:[(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,i.jsxs)("div",{className:"bg-gray-50 dark:bg-gray-800 p-4 rounded-lg border",children:[(0,i.jsx)("h4",{className:"font-semibold text-gray-900 dark:text-white mb-2",children:"Current Plan"}),(0,i.jsxs)("p",{className:"text-xl text-blue-600 dark:text-blue-400 font-bold",children:[(null===c||void 0===c?void 0:c.tier)||"Free Plan"," Plan ",(0,i.jsx)("span",{className:"text-gray-500 dark:text-gray-400",children:"(Active)"})]})]}),(0,i.jsxs)("div",{className:"bg-gray-50 dark:bg-gray-800 p-4 rounded-lg border",children:[(0,i.jsx)("h4",{className:"font-semibold text-gray-900 dark:text-white mb-2",children:"Next Payment"}),(0,i.jsx)("p",{className:"text-lg text-gray-700 dark:text-gray-300",children:(null===s||void 0===s||null===(r=s.subscription)||void 0===r?void 0:r.nextPaymentDate)||"No payment scheduled"})]})]}),(0,i.jsxs)("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg border shadow-sm",children:[(0,i.jsx)("h4",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Manage Your Subscription"}),d&&(0,i.jsx)("div",{className:"mb-4 text-green-700 dark:text-green-300 font-medium",children:"\ud83c\udf81 20% discount if you upgrade within 7 days!"}),(0,i.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3",children:[(0,i.jsx)("button",{onClick:()=>{var e;return u((null===s||void 0===s||null===(e=s.subscription)||void 0===e?void 0:e.premiumPriceId)||"price_pro_123")},className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium",children:"Upgrade to Pro"}),(0,i.jsx)("button",{onClick:()=>{var e;return u((null===s||void 0===s||null===(e=s.subscription)||void 0===e?void 0:e.basicPriceId)||"price_ent_123")},className:"px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors font-medium",children:"Upgrade to Enterprise"}),(0,i.jsx)("button",{className:"px-6 py-3 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors font-medium",children:"Cancel Subscription"})]})]}),(0,i.jsxs)("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 p-4 rounded-lg border border-yellow-200 dark:border-yellow-800",children:[(0,i.jsx)("h4",{className:"font-semibold text-yellow-800 dark:text-yellow-200 mb-2",children:"Billing Information"}),(0,i.jsx)("p",{className:"text-yellow-700 dark:text-yellow-300 text-sm",children:"Your subscription will automatically renew. You can cancel anytime before your next billing date."})]})]})}}}]);
//# sourceMappingURL=568.41c6b2a5.chunk.js.map