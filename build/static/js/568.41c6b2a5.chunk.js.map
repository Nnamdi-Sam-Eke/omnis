{"version":3,"file":"static/js/568.41c6b2a5.chunk.js","mappings":"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","sources":["components/Subscription.js"],"sourcesContent":["// File: components/SubscriptionInfo.jsx\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { getFunctions, httpsCallable } from \"firebase/functions\";\r\nimport { useAuth } from \"../AuthContext\";\r\n\r\nconst SubscriptionInfo = ({ userDetails, discountActive }) => {\r\n  const [loading, setLoading] = useState(true);\r\n  const functions = getFunctions();\r\n  const { user } = useAuth();\r\n\r\n  useEffect(() => {\r\n    const timer = setTimeout(() => setLoading(false), 3000);\r\n    return () => clearTimeout(timer);\r\n  }, []);\r\n\r\n  // üîÅ Optional: Firebase Functions fallback checkout (if needed)\r\n  const handleCheckout = async (priceId) => {\r\n    const createSession = httpsCallable(functions, \"createCheckoutSession\");\r\n    const { data } = await createSession({\r\n      priceId,\r\n      successUrl: window.location.href + \"?subscribed=true\",\r\n      cancelUrl: window.location.href,\r\n    });\r\n    console.log(\"Checkout session created:\", data);\r\n  };\r\n\r\n  // ‚úÖ Main Stripe API-based upgrade handler\r\n  const handleUpgrade = async (priceId) => {\r\n    if (!user) return alert(\"User not logged in.\");\r\n    const res = await fetch(\"/api/create-checkout-session\", {\r\n      method: \"POST\",\r\n      headers: { \"Content-Type\": \"application/json\" },\r\n      body: JSON.stringify({ userId: user.uid, email: user.email, priceId })\r\n    });\r\n\r\n    const data = await res.json();\r\n    if (data?.url) {\r\n      window.location.href = data.url;\r\n    } else {\r\n      alert(\"Failed to initiate upgrade session.\");\r\n    }\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"animate-pulse space-y-4\">\r\n        <div className=\"h-6 w-3/4 bg-gray-300 dark:bg-gray-700 rounded\" />\r\n        <div className=\"h-6 w-1/2 bg-gray-300 dark:bg-gray-700 rounded\" />\r\n        <div className=\"h-6 w-2/3 bg-gray-300 dark:bg-gray-700 rounded\" />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n        <div className=\"bg-gray-50 dark:bg-gray-800 p-4 rounded-lg border\">\r\n          <h4 className=\"font-semibold text-gray-900 dark:text-white mb-2\">Current Plan</h4>\r\n          <p className=\"text-xl text-blue-600 dark:text-blue-400 font-bold\">\r\n            {user?.tier || \"Free Plan\"} Plan <span className=\"text-gray-500 dark:text-gray-400\">(Active)</span>  \r\n          </p>\r\n        </div>\r\n        <div className=\"bg-gray-50 dark:bg-gray-800 p-4 rounded-lg border\">\r\n          <h4 className=\"font-semibold text-gray-900 dark:text-white mb-2\">Next Payment</h4>\r\n          <p className=\"text-lg text-gray-700 dark:text-gray-300\">\r\n            {userDetails?.subscription?.nextPaymentDate || \"No payment scheduled\"}\r\n          </p>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"bg-white dark:bg-gray-800 p-6 rounded-lg border shadow-sm\">\r\n        <h4 className=\"text-lg font-semibold text-gray-900 dark:text-white mb-4\">\r\n          Manage Your Subscription\r\n        </h4>\r\n\r\n        {discountActive && (\r\n          <div className=\"mb-4 text-green-700 dark:text-green-300 font-medium\">\r\n            üéÅ 20% discount if you upgrade within 7 days!\r\n          </div>\r\n        )}\r\n\r\n        <div className=\"flex flex-col sm:flex-row gap-3\">\r\n          <button\r\n            onClick={() => handleUpgrade(userDetails?.subscription?.premiumPriceId || 'price_pro_123')}\r\n            className=\"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium\"\r\n          >\r\n            Upgrade to Pro\r\n          </button>\r\n          <button\r\n            onClick={() => handleUpgrade(userDetails?.subscription?.basicPriceId || 'price_ent_123')}\r\n            className=\"px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors font-medium\"\r\n          >\r\n            Upgrade to Enterprise\r\n          </button>\r\n          <button className=\"px-6 py-3 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors font-medium\">\r\n            Cancel Subscription\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"bg-yellow-50 dark:bg-yellow-900/20 p-4 rounded-lg border border-yellow-200 dark:border-yellow-800\">\r\n        <h4 className=\"font-semibold text-yellow-800 dark:text-yellow-200 mb-2\">\r\n          Billing Information\r\n        </h4>\r\n        <p className=\"text-yellow-700 dark:text-yellow-300 text-sm\">\r\n          Your subscription will automatically renew. You can cancel anytime before your next billing date.\r\n        </p>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SubscriptionInfo;\r\n"],"names":["_ref","_userDetails$subscrip","userDetails","discountActive","loading","setLoading","useState","user","getFunctions","useAuth","useEffect","timer","setTimeout","clearTimeout","handleUpgrade","async","alert","res","fetch","method","headers","body","JSON","stringify","userId","uid","email","priceId","data","json","url","window","location","href","_jsxs","className","children","_jsx","tier","subscription","nextPaymentDate","onClick","_userDetails$subscrip2","premiumPriceId","_userDetails$subscrip3","basicPriceId"],"sourceRoot":""}